# 日志系统
## 单例模式
    保证一个类仅有一个实例，并提供一个访问它的全局访问点，该实例被所有程序模块共享。
### 实现思路
    私有化构造函数，以防止外界创建单例类的对象；使用类的私有静态指针变量指向类的唯一实例，并用一个公有的静态方法获取该
    实例
### 类别
#### 懒汉模式
* **懒汉模式：** 即非常懒，，不用的时候不去初始化，所以在第一次被使用时才进行初始化（实例初始化放在getInstance函数内部）
    * 经典的线程懒汉安全模式，使用双检测锁模式（p == nullptr检测了两次）
    * 利用局部静态变量实现线程安全懒汉模式
#### 饿汉模式
* **饿汉模式：** 即迫不及待，在程序运行时就进行初始化（实例的初始化放在getInstace函数外部，getInsgtance函数仅返回该唯一实例的指针）



## 日志
### 日志系统的运行机制
* 日志文件
    * 局部变量的懒汉模式获取实例
    * 生成日志文件，并判断同步和异步写入方式
* 同步
    * 判断是否分文件
    * 直接格式化内容，将信息写入日志文件
* 异步
    * 判断是否份文件
    * 格式化输出内容，将内容写入阻塞队列，创建一个写线程，从阻塞队列取出内容并写入日志文件

### 日志分级与分文件
#### 日志分级
日志分级的实现大同小异，一般的会提供五种级别，具体的，
* Debug，调试代码时的输出，在系统实际运行时，一般不使用。
* Warn，这种警告与调试时终端的warning类似，同样是调试代码时使用。
* Info，报告系统当前的状态，当前执行的流程或接收的信息等。
* Error和Fatal，输出系统的错误信息。
#### 日志分文件
* 日志写入前会判断当前day是否为创建日志的时间，行数是否超过最大行限制
    * 若为创建日志时间，写入日志，否则按当前时间创建新log，更新创建时间和行数
    * 若行数超过最大行限制，在当前日志的末尾加count/max_lines为后缀创建新log